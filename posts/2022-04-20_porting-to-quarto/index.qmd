---
title: "Porting a distill blog to quarto"
subtitle: | 
  I have moved this blog from distill over to quarto, and taken notes. A year
  after starting the blog, this promises to be an interesting reproducibility 
  test
date: "2022-04-20"
categories: [Quarto, Blogging, Reproducibility, Distill]
image: "img/anete-lusina-zwsHjakE_iI-unsplash.jpg"
citation:
   url: "https://blog.djnavarro.net/posts/2022-04-20_porting-to-quarto"
---

<!--------------- my typical setup ----------------->

```{r setup, include=FALSE}
long_slug <- "2022-04-20_porting-to-quarto"
renv::use(lockfile = "renv.lock")
```

<!--------------- post begins here ----------------->

First: Alison has a post:
https://www.apreshill.com/blog/2022-04-we-dont-talk-about-quarto/

Go here to download deb file:
https://quarto.org/docs/get-started/

Install quarto:
```
sudo dpkg -i quarto-0.9.282-linux-amd64.deb
```

Instructions for blog:
https://quarto.org/docs/websites/website-blog.html

Create blog from the terminal:
```
quarto create-project quarto-blog --type website:blog
```

```
Creating project at /home/danielle/GitHub/sites/quarto-blog:
  - Created _quarto.yml
  - Created index.qmd
  - Created posts/welcome/index.qmd
  - Created posts/post-with-code/index.qmd
  - Created about.qmd
  - Created styles.css
  - Created posts/_metadata.yml
```

In R:
```
usethis::create_project("~/GitHub/sites/quarto-blog/")
```

In RStudio: 
- the "Render Projects" button in the build tab (ctrl-shift-B) just works
- site builds to the `_site` folder 

First observations:
- feel is like distill, not blogdown: it doesn't use hugo so it is simpler
- the look of the site is different to distill: uses bootstrap, like simple R markdown websites
- overall seems like a lot of good features from the three systems have made it across

Customise:
- Tinker with _quarto.yml file: edit blog title, twitter, github and bootswatch theme. 
- I don't like the font but I'll fix it in CSS later

New post:
- Create new folder `_posts/2022-04-20_porting-to-quarto` and file `index.qmd`
- Add basic yml metadata
- Start writing this post, and build!

Second observation: the starter blog has dates in the wrong format if you want them to be indexed properly when the entire blog builds. The "Welcome to My Blog" post is dated "17/04/2022" which is parsed as a string literal rather than a date. On the post itself it shows up as is but on the indexing page it is rendered "May 4, 2023". You can fix this by setting date using the much beloved ISO 8601 standard: "2022-04-17".

Can I add footnotes?^[Yes] Can they be nested?^[No^[No]]

Can I add asides?

:::{.column-margin}
Also yes
:::

I used to use the `<aside>` html tag for this but now:

see also https://quarto.org/docs/authoring/article-layout.html

```
:::{.column-margin}
Also yes
:::
```


Return to the yaml header for the post:
- `description` still does what it used to: provides preview text on the listing page and a summary at the top of the file. But if you want it to have the same placement, look and feel as it did in distill, use `subtitle` instead
- `citation` from distill doesn't work the way it used to but the new thing is better anyway. https://quarto.org/docs/reference/metadata/citation.html. https://citationstyles.org/
- `categories` takes a list of values, as before
- `image` takes a relative path to the image file, and is the same as `preview` used to be
- `licence` replaces the `creative_commons` key, but has the same effect
- some of the hyper specific distill things (e.g., orcid) are gone, but I'm happy to lose those

Many of these fields are going to be the same for almost every post so you might as well set those as default metadata in `posts/_metadata.yml`

<!-- Anete Lūsiņa -->
<!-- https://unsplash.com/photos/zwsHjakE_iI -->

Okay, delete the two posts that came with the starter blog, let's try to import my own! Copy and paste my "welcome" post, rename the .Rmd to .qmd... how much work do I need to do? Not too much. I've made a decision to simplify my reproducibility workflow, so that instead of using `refinery` I've reverted to calling `renv::use()` within the post, and keeping the lock file within the individual post folder. That required a bit of tinkering, but that's hyper-specific to my blog and not actually very much work anyway. Overall this is the most time consuming step: I had to go through all my old posts, make a few minor changes to each one, check that it rendered okay, and so on. Even so, I was able to get through it in an afternoon.


Next step: let's get some style I actually like.

- Okay I'm just going to start from litera because I like the colour scheme and then modify the SASS until I'm happy https://github.com/quarto-dev/quarto-cli/blob/main/src/resources/formats/html/bootstrap/themes/litera.scss
- Details on what they've done with SASS: https://quarto.org/docs/output-formats/html-themes-more.html

Let's try to define my own page layout for blog posts? https://quarto.org/docs/output-formats/page-layout.html



<!--------------- appendices go here ----------------->

```{r, echo=FALSE}
source("appendix.R")
insert_appendix(
  repo_spec = "djnavarro/quarto-blog", 
  name = long_slug
)
```



